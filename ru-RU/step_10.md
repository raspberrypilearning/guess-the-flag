## Начни новый раунд

На данный момент в викторине есть только один раунд, поэтому довольно короткий. Давай добавим несколько раундов.

--- task ---

Создай новую `передачу`{:class="block3events"}, которая отправляет сообщение «Начать раунд».

![Спрайт флага](images/flag-sprite.png)

```blocks3
передать (начать раунд v)
```

--- /task ---

--- task ---

Добавь блок `когда я получу 'Начать раунд'`{:class="block3events"}, а затем перемести весь код из блока `когда зеленый флаг нажат`{:class="block3events"} в этот новый блок.

![Спрайт флага](images/flag-sprite.png)

```blocks3
+ when I receive [начать раунд v]
set [счет v] to [0]
создать список флагов :: custom
delete (all v) of [выбранные флаги v]
repeat (6)
    выбрать случайный флаг :: custom
end
set [правильный ответ v] to (item (pick random (1) to (length of [выбранные флаги v])) of [выбранные флаги v])
флаги-клоны :: custom
+ broadcast (назвать страну v)
```

--- /task ---

--- task ---

Удали блок `установить значение 0`{:class="block3variables"} и помести его обратно под блок `, когда зеленый флаг нажат`{:class="block3control"}. Затем добавь новый блок `передать`{:class="block3events"} под ними обоими.

![Спрайт флага](images/flag-sprite.png)

```blocks3
when green flag clicked
задать [счет v] значение [0]
передать (начать раунд v)
```

--- /task ---

--- task ---

После кода, который проверяет, верен ли ответ, добавь еще один блок `передать`{:class="block3events"}, чтобы начался новый раунд после ответа на вопрос.

![Спрайт флага](images/flag-sprite.png)

```blocks3
when this sprite clicked
if <(costume [имя v]) = (правильный ответ :: variables)> then
    change [счет v] by [1]
    say [Правильно] for (2) seconds
else
    say [К сожалению, неправильно] for (2) seconds
end
+ broadcast (начать раунд v)
```

--- /task ---

--- task ---

Нажми на зеленый флаг, чтобы проверить код. Нажми на один из флагов, чтобы сыграть раунд. Заметил, что следующий раунд не настроен должным образом?

![Следующий раунд не работает](images/next-round-does-not-work.png)

--- /task ---

Это связано с тем, что перед началом следующего раунда игра должна сначала очистить клонированные флаги.

--- task ---

Создайте еще одну новую `передачу`{:class="block3events"} с именем "очистить".

![Спрайт флага](images/flag-sprite.png)

```blocks3
передать (очистить v)
```

--- /task ---

--- task ---

Установи спрайт флага на `удалить эту копию`{:class="block3control"}, когда он получает команду `очистить`{:class="block3events"}.

![Спрайт флага](images/flag-sprite.png)

```blocks3
когда я получу [очистить]
delete this clone
```

--- /task ---

--- task ---

Помести блок передать `очистить`{:class="block3events"} чуть выше, туда, где игра начинает новый раунд после получения ответа.

```blocks3
when this sprite clicked
создать список флагов  :: custom
if <(item (costume [номер v]) of [флаги v]) = (правильный ответ :: variables)> then
    say [Правильно] for (2) seconds
    change [счет v] by [1]
else
    say [К сожалению, неправильно] for (2) seconds
end
+ broadcast (очистить v)
broadcast (начать раунд v)
```

--- /task ---

--- task ---

Протестируй свой код еще раз и убедись, что можно играть в несколько раундов и что счет увеличивается, когда даешь правильные ответы.

--- /task ---

--- task ---

Убедись, что ты скрыл переменную `правильный ответ`{:class="block3variables"}, и что игрок не может ее увидеть!

--- /task ---